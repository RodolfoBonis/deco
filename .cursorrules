# Gin Decorators V2 - Cursor Rules

## ğŸ¯ Objetivo
Manter alta qualidade de cÃ³digo, seguranÃ§a e performance no projeto gin-decorators-v2 seguindo as melhores prÃ¡ticas do Go e padrÃµes estabelecidos.

## ğŸ“‹ PadrÃµes de CÃ³digo

### ğŸ”§ Estrutura e OrganizaÃ§Ã£o
- **FunÃ§Ãµes pequenas**: MÃ¡ximo 30 linhas por funÃ§Ã£o
- **Complexidade cognitiva**: MÃ¡ximo 25 pontos por funÃ§Ã£o
- **Responsabilidade Ãºnica**: Uma funÃ§Ã£o = uma responsabilidade
- **Nomes descritivos**: Use nomes que expliquem o que a funÃ§Ã£o faz
- **ComentÃ¡rios em inglÃªs**: Todos os comentÃ¡rios devem ser em inglÃªs
- **DocumentaÃ§Ã£o em portuguÃªs**: ExplicaÃ§Ãµes para usuÃ¡rios em portuguÃªs

### ğŸ—ï¸ Arquitetura
- **SeparaÃ§Ã£o de responsabilidades**: Dividir funÃ§Ãµes complexas em funÃ§Ãµes auxiliares
- **InjeÃ§Ã£o de dependÃªncias**: Use interfaces para desacoplamento
- **ConfiguraÃ§Ã£o centralizada**: Use structs de configuraÃ§Ã£o
- **Error handling**: Sempre trate erros adequadamente
- **Logging estruturado**: Use nÃ­veis de log apropriados (Verbose, Normal, Error)

## ğŸ”’ PadrÃµes de SeguranÃ§a

### ğŸ” Criptografia e Hash
- **NUNCA use MD5**: Sempre use SHA-256 ou superior
- **TLS seguro**: Sempre configure MinVersion: tls.VersionTLS12
- **Certificados vÃ¡lidos**: Em produÃ§Ã£o, nunca use InsecureSkipVerify: true
- **ValidaÃ§Ã£o de entrada**: Sempre valide dados de entrada
- **SanitizaÃ§Ã£o**: Sanitize dados antes de usar em queries ou templates

### ğŸ›¡ï¸ ConversÃµes de Tipo
- **Overflow de inteiros**: Use comentÃ¡rios nolint:gosec apenas quando seguro
- **ConversÃµes seguras**: Sempre verifique se a conversÃ£o Ã© segura
- **Bounds checking**: Verifique limites antes de acessar slices/arrays

### ğŸŒ SeguranÃ§a Web
- **CORS configurado**: Configure CORS adequadamente
- **Rate limiting**: Implemente rate limiting em endpoints pÃºblicos
- **Input validation**: Valide todos os inputs do usuÃ¡rio
- **SQL injection**: Use prepared statements ou ORM

## ğŸ§  PadrÃµes de Complexidade

### ğŸ“Š ReduÃ§Ã£o de Complexidade Cognitiva
- **Extrair funÃ§Ãµes auxiliares**: Divida funÃ§Ãµes complexas em funÃ§Ãµes menores
- **Switch statements**: Use mapas ou funÃ§Ãµes para reduzir complexidade
- **Early returns**: Use early returns para reduzir aninhamento
- **Guard clauses**: Use guard clauses no inÃ­cio das funÃ§Ãµes

### ğŸ”„ RefatoraÃ§Ã£o de FunÃ§Ãµes Complexas
```go
// âŒ Antes - FunÃ§Ã£o complexa
func processComplexData(data []Data) error {
    // 50+ linhas com mÃºltiplas responsabilidades
}

// âœ… Depois - FunÃ§Ãµes menores
func processComplexData(data []Data) error {
    if err := validateData(data); err != nil {
        return err
    }
    
    processedData := transformData(data)
    return saveData(processedData)
}

func validateData(data []Data) error { /* ... */ }
func transformData(data []Data) []ProcessedData { /* ... */ }
func saveData(data []ProcessedData) error { /* ... */ }
```

## ğŸ§ª PadrÃµes de Teste

### ğŸ“ Estrutura de Testes
- **Nomes descritivos**: `TestFunctionName_Scenario_ExpectedResult`
- **Arrange-Act-Assert**: Sempre siga o padrÃ£o AAA
- **Testes isolados**: Cada teste deve ser independente
- **Mocks apropriados**: Use mocks para dependÃªncias externas

### ğŸ¯ Cobertura de Testes
- **MÃ­nimo 80%**: Mantenha cobertura mÃ­nima de 80%
- **Testes de erro**: Sempre teste cenÃ¡rios de erro
- **Testes de borda**: Teste casos extremos e edge cases
- **Testes de integraÃ§Ã£o**: Para funcionalidades crÃ­ticas

### ğŸ”§ ParÃ¢metros NÃ£o Utilizados
```go
// âŒ Antes
func TestFunction(t *testing.T) {
    c, _ := gin.CreateTestContext(httptest.NewRecorder())
    // c nÃ£o Ã© usado
}

// âœ… Depois
func TestFunction(t *testing.T) {
    c, _ := gin.CreateTestContext(httptest.NewRecorder())
    _ = c // Use context to avoid unused variable warning
}
```

## âš¡ PadrÃµes de Performance

### ğŸš€ OtimizaÃ§Ãµes
- **AlocaÃ§Ã£o de slices**: Use `make()` com tamanho conhecido
- **Passagem por ponteiro**: Para structs grandes, passe por ponteiro
- **Pool de objetos**: Para objetos frequentemente criados/destruÃ­dos
- **Goroutines**: Use goroutines para operaÃ§Ãµes I/O

### ğŸ“¦ Gerenciamento de MemÃ³ria
- **Evite alocaÃ§Ãµes desnecessÃ¡rias**: Reutilize buffers quando possÃ­vel
- **Defer cleanup**: Sempre use defer para limpeza de recursos
- **Context timeouts**: Configure timeouts apropriados

## ğŸ“š PadrÃµes de DocumentaÃ§Ã£o

### ğŸ“– ComentÃ¡rios
- **ComentÃ¡rios de funÃ§Ã£o**: Explique o que a funÃ§Ã£o faz, nÃ£o como
- **ComentÃ¡rios de complexidade**: Explique lÃ³gica complexa
- **Exemplos**: ForneÃ§a exemplos para funÃ§Ãµes pÃºblicas
- **TODO/FIXME**: Use tags apropriadas para tarefas pendentes

### ğŸ¨ DocumentaÃ§Ã£o de API
- **Swagger/OpenAPI**: Mantenha documentaÃ§Ã£o atualizada
- **Exemplos de uso**: ForneÃ§a exemplos prÃ¡ticos
- **DescriÃ§Ãµes claras**: Use linguagem clara e concisa

## ğŸ”§ PadrÃµes de ConfiguraÃ§Ã£o

### âš™ï¸ ConfiguraÃ§Ã£o de Desenvolvimento
- **Arquivos .env**: Use variÃ¡veis de ambiente para configuraÃ§Ãµes
- **ConfiguraÃ§Ã£o por ambiente**: Separe configs de dev/prod
- **Valores padrÃ£o**: Sempre forneÃ§a valores padrÃ£o seguros
- **ValidaÃ§Ã£o**: Valide configuraÃ§Ãµes na inicializaÃ§Ã£o

### ğŸ› ï¸ Ferramentas de Desenvolvimento
- **golangci-lint**: Use configuraÃ§Ã£o rigorosa
- **go fmt**: Sempre formate cÃ³digo
- **go vet**: Execute regularmente
- **pre-commit hooks**: Configure hooks para qualidade

## ğŸš¨ PadrÃµes de Error Handling

### âš ï¸ Tratamento de Erros
- **Error wrapping**: Use `fmt.Errorf("context: %w", err)`
- **Error types**: Defina tipos de erro especÃ­ficos
- **Logging**: Log erros com contexto adequado
- **Recovery**: Implemente recovery para panics

### ğŸ” ValidaÃ§Ã£o
- **Input validation**: Valide inputs no inÃ­cio das funÃ§Ãµes
- **Business rules**: Valide regras de negÃ³cio
- **Type safety**: Use tipos fortes para evitar erros

## ğŸ“Š MÃ©tricas de Qualidade

### ğŸ¯ Metas
- **Complexidade cognitiva**: < 25 por funÃ§Ã£o
- **Cobertura de testes**: > 80%
- **Erros de lint**: 0
- **Warnings crÃ­ticos**: 0
- **DuplicaÃ§Ã£o de cÃ³digo**: < 5%

### ğŸ“ˆ Monitoramento
- **AnÃ¡lise estÃ¡tica**: Execute regularmente
- **Code reviews**: Sempre revise cÃ³digo
- **RefatoraÃ§Ã£o contÃ­nua**: Melhore cÃ³digo constantemente
- **DocumentaÃ§Ã£o**: Mantenha documentaÃ§Ã£o atualizada

## ğŸ”„ Processo de Desenvolvimento

### ğŸ“ Antes de Commitar
1. **Execute lint**: `make lint`
2. **Execute testes**: `go test ./...`
3. **Verifique cobertura**: `go test -cover`
4. **Formate cÃ³digo**: `go fmt ./...`
5. **Revise mudanÃ§as**: `git diff --cached`

### ğŸš€ Antes de Fazer PR
1. **Todos os testes passando**
2. **Cobertura adequada**
3. **DocumentaÃ§Ã£o atualizada**
4. **Exemplos funcionando**
5. **Performance aceitÃ¡vel**

## ğŸ¨ ConvenÃ§Ãµes de Nomenclatura

### ğŸ“ FunÃ§Ãµes e VariÃ¡veis
- **CamelCase**: Para funÃ§Ãµes e variÃ¡veis
- **PascalCase**: Para tipos e funÃ§Ãµes pÃºblicas
- **snake_case**: Para arquivos de configuraÃ§Ã£o
- **kebab-case**: Para URLs e paths

### ğŸ·ï¸ Tags e AnotaÃ§Ãµes
- **JSON tags**: Use snake_case para JSON
- **YAML tags**: Use snake_case para YAML
- **Struct tags**: Mantenha consistÃªncia

## ğŸ”§ ConfiguraÃ§Ã£o de Ferramentas

### ğŸ› ï¸ golangci-lint
```yaml
# .golangci.yml
linters:
  enable:
    - gocognit
    - gosec
    - govet
    - errcheck
    - unused
    - gocritic
    - gofmt
    - goimports

linters-settings:
  gocognit:
    min-complexity: 25
  gosec:
    excludes:
      - G404 # Random number generation
```

### ğŸ“Š go.mod
- **VersÃµes fixas**: Use versÃµes especÃ­ficas
- **MÃ³dulos mÃ­nimos**: Inclua apenas dependÃªncias necessÃ¡rias
- **AtualizaÃ§Ãµes regulares**: Mantenha dependÃªncias atualizadas

## ğŸ¯ Checklist de Qualidade

### âœ… Antes de Commitar
- [ ] CÃ³digo formatado (`go fmt`)
- [ ] Lint passando (`make lint`)
- [ ] Testes passando (`go test`)
- [ ] Cobertura adequada (>80%)
- [ ] DocumentaÃ§Ã£o atualizada
- [ ] Exemplos funcionando
- [ ] Performance aceitÃ¡vel

### âœ… Antes de Fazer PR
- [ ] Todos os checks passando
- [ ] Code review aprovado
- [ ] DocumentaÃ§Ã£o completa
- [ ] Changelog atualizado
- [ ] Breaking changes documentados
- [ ] MigraÃ§Ã£o guide (se necessÃ¡rio)

## ğŸš€ Comandos Ãšteis

```bash
# Qualidade de cÃ³digo
make lint                    # Executar lint
make test                    # Executar testes
make test-coverage          # Testes com cobertura
make format                 # Formatar cÃ³digo
make clean                  # Limpar build

# Desenvolvimento
make dev                    # Servidor de desenvolvimento
make build                  # Build de produÃ§Ã£o
make install                # Instalar ferramentas
```

## ğŸ“š ReferÃªncias

- [Effective Go](https://golang.org/doc/effective_go.html)
- [Go Code Review Comments](https://github.com/golang/go/wiki/CodeReviewComments)
- [Go Security Best Practices](https://golang.org/doc/security/best-practices)
- [Go Testing Best Practices](https://golang.org/doc/tutorial/add-a-test)

---

**Lembre-se**: Qualidade de cÃ³digo Ã© um processo contÃ­nuo. Sempre busque melhorar e refatorar quando necessÃ¡rio! ğŸš€ 